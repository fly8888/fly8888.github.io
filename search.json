[{"title":"centos7 配置端口转发","url":"/2020/02/15/blog3/","content":"\n#### 注意此处以 centos7 配置为例，防火墙为 firewall 。\n\n# 开始配置\n\n```bash\n    #查看防护墙是否开启,我这里直接重启\n    systemctl restart firewalld\n    #防火墙添加开放原始端口\n    firewall-cmd --add-port=原始端口/tcp --permanent\n    #添加转发规则\n    firewall-cmd --add-forward-port=port=原始端口:proto=tcp:toaddr=新的IP:toport=新的端口 --permanent\n    #查看端口列表，确定是否开启端口\n    firewall-cmd --list-all\n    #重新加载防火墙\n    firewall-cmd --reload\n    \n    #内核参数文件sysctl.conf配置ip转发功能\n    vi /etc/sysctl.conf\n    #在文本内容中添加：net.ipv4.ip_forward = 1\n    net.ipv4.ip_forward = 1\n    #使立即生效\n    sysctl -p\n    \n    完成了！\n```\n\n**非常简单的就完成了**\n\n# 下面是 firewalld服务 常用命令\n\n### firewalld服务配置\n\n```plaintext\n    启动服务：systemctl start firewalld\n    \n    关闭服务：systemctl stop firewalld\n    \n    重启服务：systemctl restart firewalld\n    \n    查看服务状态：systemctl status firewalld\n    \n    开机自启服务：systemctl enable firewalld\n    \n    开机禁用服务：systemctl disable firewalld\n    \n    查看是否开机自启：systemctl is-enable firewalld\n    \n    PS：systemctl常见其他命令：\n    \n    查看已启动的服务列表：systemctl list-unit-files | grep enabled\n    \n    查看启动失败的服务列表：systemctl --failed\n```\n\n### firewalld规则配置\n\n```plaintext\n    查看版本：firewall-cmd --version\n    查看帮助：firewall-cmd --help\n    查看状态：firewall-cmd --state\n    查看所有打开的端口：firewalld-cmd --zone=public --list-ports\n    查看所有规则：firewall-cmd --list-all\n    重载规则：firewall-cmd --reload\n    查看区域信息：firewall-cmd --get-active-zones\n    查看指定接口所属区域： firewall-cmd --get-zone-of-interface=enp4s0\n    拒绝所有包：firewall-cmd --panic-on\n    取消拒绝所有包： firewall-cmd --panic-off\n    查看是否拒绝： firewall-cmd --query-panic\n ```\n\n### firewalld端口规则\n\n```plaintext\n    添加端口：firewall-cmd --add-port=80/tcp --permanent\n    移除端口：firewall-cmd --remove-port=80/tcp --permanent\n    查看端口状态：firewall-cmd --zone=public --query-port=80/tcp\n    （PS：添加或删除端口后不会立即生效，配置完 --reload后才能生效；--permanent代表永久生效）\n```\n### firewalld端口转发\n    \n\n```plaintext\n    开启防火墙伪装：firewall-cmd --add-masquerade --permanent    //开启后才能转发端口\n    \n    添加转发规则：firewall-cmd --add-forward-port=port=80:proto=tcp:toport=8080:toaddr=192.168.1.1 --permanent\n    （PS：此规则将本机80端口转发到192.168.1.1的8080端口上，配置完--reload才生效）\n    \n    如果配置完以上规则后仍不生效，检查防火墙是否开启80端口，如果80端口已开启，仍无法转发，可能是由于内核参数文件sysctl.conf未配置ip转发功能，具体配置如下：\n    \n    vi /etc/sysctl.conf\n    \n    在文本内容中添加：net.ipv4.ip_forward = 1\n    保存文件后，输入命令sysctl -p生效\n```\n\n    \n","tags":["linux端口转发"]},{"title":"关于练手文章的记录","url":"/2020/02/13/blog0/","content":"\n---\n\n# 练手过程\n\n### 主体内容的创建\n\n* 本人使用的是MacOS，直接用safari浏览器，右键，“审查属性” 抓取html内容。\n\n* html在线转Markdown,多番测试之后，使用了 [https://www.baidufe.com/fehelper/html2markdown/index.html](https://www.baidufe.com/fehelper/html2markdown/index.html) 这个网站的转换。虽说不是很完美，但已经省了很大功夫。文本内容，基本都是ok的，但是图片链接有问题，盗链会不稳定。\n\n* 解决图床问题，最终使用[https://www.jsdelivr.com/?docs=gh](https://www.jsdelivr.com/?docs=gh) 给的方案，把图片上传到GitHub，直接访问 https://cdn.jsdelivr.net/gh/GitHub用户名/路径/图片 ，即可显示图片，稳定方便，太棒了 。由于是第一次写这个，我是手动拖动保存他人blog的图片（应该通过脚本去下载图片最为方便），发现保存后的图片跟原本blog里图片同名，又省很大劲。替换图片链接后，稍作修改，就完工了。\n\n![imge](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog0/image1.png)\n\n","tags":["MacOS","iOS"],"categories":["MacOS","iOS"]},{"title":"Mac 系统下搭建hexo个人博客","url":"/2020/02/13/blog1/","content":"#### 此文章为练手文章，出处来自 https://www.jianshu.com/p/77db3862595c\n---\n\n\n# 1.前言\n\n不久前买了17款的MacBook Pro，全新的电脑，我想在这个上面管理我的个人博客，所以我要继续搭建这样一个环境，说起来我也应该是老手了，我在2月份的时候已经在我的Linux上面搭建了环境，可以的是，我的Linux被我系统重装了，磁盘全部清空，我没有办法继续来更新我的博客。这件事我已经想了好久，因为第一次的搭建，让我有些阴影，花了我好多的时间，太可怕。这次回家，我打算攻克这个问题，并且记录下来，所以有了这篇笔记。首先，需要的是把环境搭建好，这个是比较简单的，关键的是后期的博客修饰，要将其看起来很舒服，美观大气，简洁明了。那么开始吧......\n\n# 2. hexo博客系统搭建\n\n如果不知道hexo是个什么东西，那就去百度一下吧，我也没法说清楚，我们可以使用它就可以了。可以去看官方的[文档](https://hexo.io/zh-cn/docs/)，说得很详细，简单的说就是一个博客框架。\n\n### 2.1 Github账号注册及仓库创建\n\n太多概念需要普及一下，如果是完全零基础的小伙伴，我这里也没办法，我也讲不了多少，我这里就只讲实战了，而不普及理论知识了，用到的时候去Google一下吧，基本没有什么问题。\n\n* 进入[GitHub](https://github.com/)官网，注册账号\n![账号注册页面，都是一般的流程，看着填写就可以](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-81de99996c35fa6b.png)\n![注册之后的样子](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-cad828d97fb4f8a5.png)\n![点击new仓库](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-918befac816ff5d6.png)\n* 创建仓库的名字必须为username.github.io，我的用户名为Lxmic，因此我创建的仓库就是Lxmic.github.io，这是很关键的一点，很重要。输入名字后，直接点最下面绿色的按钮，创建新仓库。这一部分基本完成了，接下去需要在终端操作。\n![输入仓库的名字](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-d451ae9bb81c6d0e.png)\n\n### 2.2 环境配置\n\n参考官网[文档](https://hexo.io/zh-cn/docs/)：\n\n*  安装Git、Node.js和hexo\n\n```bash\n# 首先检查时候安装了git和node.js，终端输入一下命令，\nnode -v #是否出现安装版本信息，出现说明已经安装了\ngit --version #同上述情况\n# 如果没有安装，则进行安装,都可以通过直接下载安装测序进行安装，这里不演示，提供下载网址：\n[git]: https://sourceforge.net/projects/git-osx-installer/\n[node.js]: https://nodejs.org/en/\n```\n\n*   如果已经安装好了上述的软件，那么可以安装hexo，然后等待安装成功即可。\n    \n    `npm install -g hexo-cli`\n\n*   创建blog文件夹，并初始化建立博客框架\n    \n```bash\n    # 在你的家目录下创建一个blog文件夹\n    mkdir blog\n    # 进入目录\n    cd blog\n    # 初始化目录\n    hexo init\n    开启本地服务 \n    # hexo s\n```\n\n\n    出现以下信息，说明你可以本地访问博客系统，在浏览器输入4000这个网址，就可以看到博客首页。\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-05ee93d0cccbdbe0.png)\n\n![到这里说明你的环境以及没有问题了，成功了搭建起了博客框架](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-7c18ba82bb6dd688.png)\n\n\n\n### 2.3 博客关联到Github仓库\n\n在第一步的时候，我们已经将仓库创建好了，这里就需要用到了。\n\n* 首先我们要编辑图中_config.yml文件，这是博客的主要配置文件，在下面一部分，我们要频繁使用这个配置文件，这里先编辑一步，为了管理GitHub账号。\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-a9853e573b2f3168.png)\n\n\n\n*   打开文件之后，在文档最后，输入红色大框中的内容，只需要将你的username替换就可以了，其他无需更改。\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-ad943de52c423555.png)\n\n\n*   然后在目录中执行\n    \n\n      \n```bash\n    # 产生静态网页\n    hexo g\n    # 部署到GitHub page上\n    hexo d\n```\n\n然后你需要输入你GitHub的用户名和密码，这样你就就可以使用你的仓库名去访问你的博客主页了。为了每一次部署不必一种输入密码，我们可以生成秘钥，然后提交到GitHub，进行关联，那么你下次就不需要再输入密码了。\n\n    \n\n![关联成功，这里我是购买了自己的域名，所以显示的是域名，域名关联在后面讲，这里先忽略\n](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-a1753ffbbf1d4f96.png)\n\n*   关联GitHub账号，免密提交\n    \n\n```bash\n    # 用你注册GitHub时的邮箱号，进行秘钥生成\n    cd ~\n    ssh-keygen -t rsa -C \"xxxxxxx@qq.com\"\n    # 系统就会生成一个隐藏文件夹.ssh\n    cd .ssh\n    ls\n    # 复制公钥\n    vim id_rsa.pub\n```\n\n点击箭头的按钮，进入设置，然后点击SSH and GPG keys，创建新的SSH，将之前复制的公钥黏贴，提交，OK。\n\n    \n\n![进入settings](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-9a6fe8e8a47d59dc.png)\n\n\n![](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-92b2d4a66901907b.png)\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-f4a1759f76abfc57.png)\n\n\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-94a0d1a2f04727f6.png)\n\n\n### 2.4 博客基本使用\n\n*   创建新的文章\n    \n    `hexo new\"djy\"`\n\n![执行之后，就会在下面的目录里自动创建djy.md的markdown文件，然后你就可以输入内容](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-a3a06109307ab5b3.png)\n\n\n*   编辑markdown文件，可以使用markdown神器[typora](https://typora.io/)。可以看到markdown文件，里面自动生成了题目和时间，还可以写标签，这些我们先不去修改，这些是yaml内容，一般不去修改，修改不好会报错。我们直接在下面编辑一些内容。\n    \n\n![](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-e862816192df3dbf.png)\n\n*   发布文章至博客\n    \n```bash\n        hexo g\n        hexo d\n```\n\n如果运行加过是这样的结果，那么你的博客发布成功了，以后每次只要这么进行就可以更新你的博客了。\n\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-c4837e910f043459.png)\n![我写的内容，可以在博客上发布了，成功](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-3cb21a03777bc825.png)\n\n\n# 3. Hexo博客美化及功能增添\n\n### 3.1 选主题\n\n*   Hexo官网：[https://hexo.io/themes/](https://hexo.io/themes/)，里面有特别多的主题可以选择，我在这里选的是next这个主题。下载主题：\n    \n\n   \n```bash\n    cd ~/blog\n    git clone https://github.com/iissnan/hexo-theme-next themes/next\n```\n\n\n*   修改站点配置文件：`_config.yml`，将里面`76行`的theme由landscape修改为next\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-3088138bb70404d7.png)\n\n*   更换新的主题，可能会有一些延迟\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-039a85947f69656b.png)\n\n\n\n### 3.2 通过站点配置文件修改网站细节\n\n需要修改的内容可以参考网站：[https://hexo.io/zh-cn/docs/configuration](https://hexo.io/zh-cn/docs/configuration) ，里面对各个参数有一些详细的解释，我这里修改一些博客的标题，副标题，描述，语言等。\n\n**这里我想说的是，一般你修改一项，重新部署网站一下，因为一旦出错，就比较容易找到原因。**\n\n    \n\n![网站配置说明](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-52d30a963674a708.png)\n![只修改这些](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-9a05ff4d6d8603ff.png)\n![修改后的博客，字体变成了中文，有了标题和副标题](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-e5d38223a960e5d3.png)\n\n\n### 3.3 主题文件修改博客内容\n\n*   关键也是同样名字的配置文件：`_config.yml`，看一下里面的内容。\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-2f827fc6a36506cc.png)\n\n![开始是一些描述性的内容](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-dbc42287b1f9d490.png)\n\n*   修改整个主题，不需要的用#注释掉，这里我已经将默认的Muse注释掉，改为mist\n    \n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-14af26f685431eff.png)\n\n*   将menu也修改，没来只有首页和归档，限制添加标签和分类，只需要去掉前面的#，现在来看一下效果。\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-73f54bfdf14f4a9e.png)\n\n\n\n![效果](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-e2bc9266af442e86.png)\n\n\n\n*   需要新建一个分类和标签页面\n    \n\n![找不到页面](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-128cb22b5fbe2888.png)\n\n\n    ```bash\n        cd ~/blog\n        hexo new page categories\n        hexo new page tags\n    ```\n\n![添加分类类型](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-ee0bf9ca96a73be1.png)\n\n![添加标签类型](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-a67e3c3e0b7d1bf2.png)\n\n效果如下：\n\n![出现标签页面](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-ab1201acc94ac173.png)\n\n\n\n*   设置头像\n    \n![头像设置，参考next官网](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-92da53d5e99eef50.png)\n\n![设置完之后的头像](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-9bbc70592c01a5f2.png)\n\n*   设置侧边栏的社交连接\n    \n\n![next官网](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-e0256e0a9e7f30a6.png)\n\n![设置后的效果](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-301394f036009123.png)\n\n\n*   设置disqus评论功能，你只需要将站点配置文件`disqus_shortname`中设置你`shortname`，并在主题配置文件中开启disqus功能为true。\n    \n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-ef5470ccbab918ab.png)\n![开启评论后的效果](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-d025c5141f9f96d3.png)\n\n\n\n*   设置本地搜索功能，只需要主题配置文件将`local search` 改成`true`，并且需要修改站点配置文件，在extensions下面，添加内容如下：\n    \n\n    ```bash\n        search:\n        path: search.xml\n        field: post\n        format: html\n        limit: 10000\n    ```\n    \n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-40ceed2500461a85.png)\n\n![搜索的效果](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-06c25d7e130cd569.png)\n\n\n\n*   设置阅读全文按钮，有时候文章有很多，你没有办法都是全文显示，会显得特别混乱，因此我们只要显示一部分内容。将主题配置文件中`auto_excerpt`开启，然后更新，就完全OK了。\n\n![](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-3d5c73f743f64f8b.png)\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-2495b44e49466190.png)\n\n*   设置打赏功能，不管有没有人，设置一下这个功能还是挺好的。\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-d5dc5582ff81079a.png)\n\n![打赏功能已经开启](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-b74f129ea9e06dfb.png)\n\n\n\n*   修改文章内链接文本样式，你如果不想要下划线，那么可以把里面的border-bottom这4行代码都修改为`none`。\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-04f6bc9c7d793f4a.png)\n\n> 参考文章：[https://www.jianshu.com/p/3a05351a37dc](https://www.jianshu.com/p/3a05351a37dc)\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-d005b7f46df73ecd.png)\n\n*   设置网站缩略图标，将small、medium、apple_touch_icon这三行，都设置成一样的图片地址\n> 参考文章：[https://www.jianshu.com/p/3a05351a37dc](https://www.jianshu.com/p/3a05351a37dc)\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-3810a90a63f2740a.png)\n\n![这就是我选择的图标](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-f1d5619a1261e8a3.png)\n\n*   添加网站访问量\n> 参考文章：[https://www.jianshu.com/p/3a05351a37dc](https://www.jianshu.com/p/3a05351a37dc)\n\n![完全是别人的东西，直接跟着尝试](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-179683b97303a2c2.png)\n\n效果如下：\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-72ce02ae40117fd1.png)\n\n*   添加版权信息\n> 参考文章：[http://stevenshi.me/2017/05/26/hexo-add-copyright/](http://stevenshi.me/2017/05/26/hexo-add-copyright/)\n\n![版权](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-6f6f4124ea3af77b.png)\n\n\n*   新创建的文章自动添加分类\n\n在blog主目录下，编辑`post.md`，添加`categories：`就可以在创建的博客中生成。\n\n![image.png](https://cdn.jsdelivr.net/gh/fly8888/BlogPic/blog1/3478485-489eac36689cc02d.png)\n\n# 4. 结语\n\n花了一天半的时间，终于完成了博客的搭建，完全恢复到了之前的状态，这样就行了。网上有太多资料了，看都看不过来，很不错，下面列出我参考过的。终于把这件事给做完了，从二月份拖到了现在，真是拖延到无穷无尽。最后附上我博客的地址，会不定期更新。\n\n\n\n[此文章为练手文章，出处来自 https://www.jianshu.com/p/77db3862595c](https://www.jianshu.com/p/77db3862595c)","tags":["MacOS","iOS"],"categories":["MacOS","iOS"]}]